<!DOCTYPE html [
	<!ENTITY copy "&#169;">
	<!ENTITY times "&#215;">
	<!ENTITY nbsp "&#160;">
]>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:viewerComponent="http://xmlns.jcp.org/jsf/composite/components"
      xmlns:widgetComponent="http://xmlns.jcp.org/jsf/composite/components/widgets"
      xmlns:templateComponent="http://xmlns.jcp.org/jsf/composite/themes/boilerplate/components">

<h:head profile="http://dublincore.org/documents/dcq-html/">

	<ui:insert name="head" />

	<meta charset="utf-8" />
	<meta name="description" content="" />
	<meta name="generator" content="Goobi viewer" />
	<meta name="version" content="#{navigationHelper.version}" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <ui:fragment rendered="#{navigationHelper.displayNoIndexMetaTag}">
        <meta name="robots" content="noindex" />
    </ui:fragment>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    
    <!-- TWITTER CARD / OPENGRAPH -->
    <ui:include src="/resources/includes/embed/twittercard.xhtml" />
    <ui:include src="/resources/includes/embed/opengraph.xhtml" />

    <title><h:outputText value="#{activeDocumentBean.titleBarLabel} - " rendered="#{activeDocumentBean.titleBarLabel != null}" />Theme Boilerplate</title>
    
    <!-- FAVICON -->
    <link rel="shortcut icon" href="#{request.contextPath}/resources/themes/#{navigationHelper.theme}/images/template/favicon.ico" />
    
    <!-- RELATIVE URL TAGS -->
    <h:outputText escape="false" value="#{activeDocumentBean.relativeUrlTags}" />
    
    <!-- OPENSEARCH -->
    <link rel="search" type="application/opensearchdescription+xml" title="#{configurationBean.name}" href="#{request.contextPath}/rest/opensearch/getxml/" />
    
    <!-- OEMBED -->
    <ui:fragment rendered="#{activeDocumentBean.recordLoaded}">
        <link rel="alternate" type="application/json+oembed" href="#{navigationHelper.applicationUrl}oembed?url=#{navigationHelper.encodedUrl}&amp;format=json" title="Goobi viewer oEmbed Profile" />
    </ui:fragment>

    <!-- BASIC CSS -->
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/libs/bs/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/libs/jQueryUI-1.12.1/jquery-ui.min.css" />
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/libs/jQueryUI-1.12.1/jquery-ui.structure.min.css" />
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/libs/font-awesome.min.css" />
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/css/dist/viewer.min.css" />

	<!-- CUSTOM CSS -->
	<link rel="preload" href="#{request.contextPath}/resources/themes/#{navigationHelper.theme}/css/dist/#{navigationHelper.theme}Styles.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
	<noscript>
		<link rel="stylesheet" href="#{request.contextPath}/resources/themes/#{navigationHelper.theme}/css/dist/#{navigationHelper.theme}Styles.min.css" />
	</noscript>
	<script>
		/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
		(function(w){
			"use strict";
			/* exported loadCSS */
			var loadCSS = function( href, before, media ){
				// Arguments explained:
				// `href` [REQUIRED] is the URL for your CSS file.
				// `before` [OPTIONAL] is the element the script should use as a reference for injecting our stylesheet <link> before
				// By default, loadCSS attempts to inject the link after the last stylesheet or script in the DOM. However, you might desire a more specific location in your document.
				// `media` [OPTIONAL] is the media type or query of the stylesheet. By default it will be 'all'
				var doc = w.document;
				var ss = doc.createElement( "link" );
				var ref;
				if( before ){
					ref = before;
				}
				else {
					var refs = ( doc.body || doc.getElementsByTagName( "head" )[ 0 ] ).childNodes;
					ref = refs[ refs.length - 1];
				}
	
				var sheets = doc.styleSheets;
				ss.rel = "stylesheet";
				ss.href = href;
				// temporarily set media to something inapplicable to ensure it'll fetch without blocking render
				ss.media = "only x";
	
				// wait until body is defined before injecting link. This ensures a non-blocking load in IE11.
				function ready( cb ){
					if( doc.body ){
						return cb();
					}
					setTimeout(function(){
						ready( cb );
					});
				}
				// Inject link
					// Note: the ternary preserves the existing behavior of "before" argument, but we could choose to change the argument to "after" in a later release and standardize on ref.nextSibling for all refs
					// Note: `insertBefore` is used instead of `appendChild`, for safety re: http://www.paulirish.com/2011/surefire-dom-element-insertion/
				ready( function(){
					ref.parentNode.insertBefore( ss, ( before ? ref : ref.nextSibling ) );
				});
				// A method (exposed on return object for external use) that mimics onload by polling document.styleSheets until it includes the new sheet.
				var onloadcssdefined = function( cb ){
					var resolvedHref = ss.href;
					var i = sheets.length;
					while( i-- ){
						if( sheets[ i ].href === resolvedHref ){
							return cb();
						}
					}
					setTimeout(function() {
						onloadcssdefined( cb );
					});
				};
	
				function loadCB(){
					if( ss.addEventListener ){
						ss.removeEventListener( "load", loadCB );
					}
					ss.media = media || "all";
				}
	
				// once loaded, set link's media back to `all` so that the stylesheet applies once it loads
				if( ss.addEventListener ){
					ss.addEventListener( "load", loadCB);
				}
				ss.onloadcssdefined = onloadcssdefined;
				onloadcssdefined( loadCB );
				return ss;
			};
			// commonjs
			if( typeof exports !== "undefined" ){
				exports.loadCSS = loadCSS;
			}
			else {
				w.loadCSS = loadCSS;
			}
		}( typeof global !== "undefined" ? global : this ));
	</script>
    
    <!-- SUBTHEME CSS -->
    <h:panelGroup rendered="#{navigationHelper.subthemeSelected}">
        <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/themes/#{navigationHelper.theme}/css/dist/#{navigationHelper.subThemeDiscriminatorValue}Styles.min.css" />
    </h:panelGroup>
    
    <!-- FORCES PRIMEFACES TO INCLUDE JQUERY & JQUERY-UI -->
    <h:outputScript library="primefaces" name="/jquery/jquery.js" target="head" />
    <h:outputScript library="primefaces" name="/jquery/jquery-plugins.js" target="head" />
    
    <!-- JAVASCRIPT -->
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/libs/bs/bootstrap.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/libs/tinymce/tinymce.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/libs/datatables.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/libs/jqueryUi/1.12.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/libs/jqueryUi/1.11.0/jquery.ui.touch-punch.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/libs/reactiveX/rx.lite.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/libs/q-promises/q.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/libs/clipboard/clipboard.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/libs/pdfjs/pdf.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/libs/riot/riot.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/dist/viewer.min.js"></script>
    <script type="text/javascript" src="#{request.contextPath}/resources/javascript/dist/riot-tags.js"></script>
</h:head>

<ui:insert name="metadata" />

<h:body id="viewer">
	<h:panelGroup id="subBody">
	    <f:view locale="#{navigationHelper.locale}">        
	        <!-- TOP ANCHOR FOR SCROLLING TO TOP -->
	        <span id="top"></span>
	        
	        <!-- COinS -->
	        <span class="Z3988" title="#{activeDocumentBean.viewManager.contextObject}"></span>
	        
	        <!-- MESSAGES -->
			<div class="messages">
				<h:messages infoClass="alert alert-success" errorClass="alert alert-danger" />
			</div>
	        
	        <!-- LAYOUT -->
	        <ui:include src="includes/layout.xhtml" />
	        
	        <!-- CUSTOM JAVASCRIPT -->
	        <ui:include src="includes/customJS.xhtml" />        
	    </f:view>
	    
	    <!-- PIWIK -->
	    <ui:fragment rendered="#{configurationBean.piwikTracking}">
	        <viewerComponent:piwikTracking piwikBaseURL="#{configurationBean.piwikBaseURL}" piwikSiteID="#{configurationBean.piwikSiteID}" />
	    </ui:fragment>
    </h:panelGroup>
</h:body>
</html>
